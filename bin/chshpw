#!/usr/bin/env bash
# .sh/bin/chshpw 20171015 - 20171015
# Copyright (C) 1995-2017 Mark Constable <markc@renta.net> (AGPL-3.0)

[[ -z $1 ]] && echo "Usage: chshpw u**** [newpw]" && exit 1

VUSER=$1
UPASS=${2:-$(newpw 1)}

UUSER=$(getent passwd | grep -E "^u[0-9]|$ADMIN" | sort | awk -F: '{printf "%-7s %-39s %s\n", $1, $5, $6}' | grep $1)

echo $UUSER

#exit
#echo $VUSER:$UPASS | chpasswd

echo "\
SFTP
========

Server:
"
